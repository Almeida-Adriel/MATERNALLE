generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DIRECT_URL")
}

model Usuarios {
  id                 String           @id @default(uuid())
  nome               String
  cpf                String           @unique
  data_nascimento    DateTime         @db.Date
  email              String  
  lastLoginAt        DateTime
  passwordHash       String
  endereco           String
  telefone           String
  perfil             Perfil?
  status_maternidade statusMaternidade @default(NENHUMA)
  dpp                DateTime?
  notas              Notas[]
  filhos             Filhos[]
}

model Perfil {
  id                String          @id @default(uuid())
  id_usuario        String          @unique
  tipoPerfil        tipoPerfil      @default(BASICO)
  role              role
  data_expiracao    DateTime?       @db.Date
  usuario           Usuarios        @relation(fields: [id_usuario], references: [id])

  @@index([id_usuario])
}

model Filhos {
  id                String          @id @default(uuid())
  id_usuario        String          
  cpf               String?         @unique
  nome              String
  data_nascimento   DateTime        @db.Date
  peso_nascimento   Decimal?        
  tipo_parto        TipoParto?     
  genero            GeneroBebe?
  usuario           Usuarios        @relation(fields: [id_usuario], references: [id])

  @@index([id_usuario])
}

model Notas {
  id                String          @id @default(uuid())
  id_usuario        String               
  titulo            String
  descricao         String
  data_criacao      DateTime        @db.Date
  data_lembrete     DateTime?       @db.Date
  lembrete          Boolean         @default(false)
  tipo              Tipo?
  outro             String?                   
  usuario           Usuarios        @relation(fields: [id_usuario], references: [id])

  @@index([id_usuario])
}

model Conteudos {
  id                String          @id @default(uuid())
  titulo            String
  descricao         String
  data_criacao      DateTime        @db.Date @default()
  tipo_conteudo     TipoConteudo
  acesso            Perfil
  outros            String?
  link_referencia   String?
}

model RecoveryCode {
  id        String   @id @default(uuid())
  cpf       String   @unique
  code      String   @db.VarChar(5)
  expiresAt DateTime
  createdAt DateTime @default(now()) @db.Date
}

enum role {
  CLIENTE
  ADMIN
}

enum tipoPerfil {
  BASICO
  PREMIUM
  PREMIU_ANUAL
}

enum statusMaternidade {
  NENHUMA
  GESTANTE
  PUERPERA
}

enum TipoParto {
  NORMAL
  CESAREA
  OUTRO
}

enum GeneroBebe {
  MASCULINO
  FEMININO
  NAO_INFORMADO
}

enum Tipo {
  EXAME
  VACINA
  CONSULTA
  MEDICACAO
  SINTOMA
  DIETA
  EXERCICIO
  GESTACAO
  PUERPERIO
  FINANCEIRO
  EVENTO
  OUTRO
}

enum TipoConteudo {
  PUERPERA
  GESTACAO
  DIETA
  EXERCICIO
  VACINA
  EXAME
  SINTOMAS
  OUTROS
}